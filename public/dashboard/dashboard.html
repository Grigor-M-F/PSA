<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="../assets/imgs/imgMedicina.png" type="image/png">
    <link rel="stylesheet" href="../css/global.css">
    <link rel="stylesheet" href="../css/dashboards.css">
    <title>PSA dashboardt</title>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <header>
        <div class="header-left">
            <h1>PSA</h1>

            <div class="hello">
                <h3>Olá, <span id="user">usuário</span></h3>
            </div>
            <div class="btn-nav">
                <a href="">
                    <h3>Mensagem</h3>
                </a>
            </div>
            <div class="btn-nav">
                <a href="">
                    <h3>Mural de Avisos</h3>
                </a>
            </div>
            <div class="btn-logout" onclick="limparSessao()">
                <h3>Sair</h3>
            </div>
        </div>
    </header>
    <main>
        <section>
            <div class="kpicontainer">
                <h1>Seu gasto Energético diário</h1>
                <p>Sua taxa Metabolica Basal, mais o seu Nível de Atividade</p>


                <h2 id="tmbValor"></h2>

                <canvas id="kpi"></canvas>
            </div>

            <div class="dash" id="dashPsa">
                <div id="idgrafico">
                    <canvas id="myChart" width="600" height="400"></canvas>
                </div>
            </div>

        </section>
    </main>
</body>

</html>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>

<script>
    user.innerHTML = sessionStorage.NOME_USUARIO;

    var tmb = 0;


    fetch(`http://localhost:3333/dash/dados_kpi1`, {
        method: "GET",
        headers: {
            "Content-Type": "application/json"
        }
    }).then(res => res.json()).then((res) => {
        console.log(res);
        tmb = res.tmb;
        tmbValor.innerHTML = `${tmb}`
    })

    var diasForObj = 0;
    fetch(`http://localhost:3333/dash/dados_kpi2`, {
        method: "GET",
        headers: {
            "Content-Type": "application/json"
        }
    }).then(res => res.json()).then((res) => {
        console.log(res);
        chegada = res.chegada;
        tempoObjetivo = res.temp_obj;
        
    })




</script>